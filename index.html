<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        @keyframes jump {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        .jump {
            animation: jump 0.5s ease;
        }
        .keyboard-key {
            transition: all 0.2s ease;
        }
        .keyboard-key:hover {
            transform: scale(1.1);
        }
        .keyboard-key:active {
            transform: scale(0.95);
        }
        .theme-space { background-color: #1a1a2e; }
        .theme-space .panel { background-color: #16213e; }
        .theme-space .letter { color: #e94560; }
        .theme-space .btn { background-color: #0f3460; }
        .theme-space .btn:hover { background-color: #e94560; }
        .theme-forest { background-color: #2c5e1a; }
        .theme-forest .panel { background-color: #4a8c2a; }
        .theme-forest .letter { color: #f6f4e6; }
        .theme-forest .btn { background-color: #2c5e1a; }
        .theme-forest .btn:hover { background-color: #4a8c2a; }
        .theme-pirate { background-color: #1a1a2e; }
        .theme-pirate .panel { background-color: #5d2a2a; }
        .theme-pirate .letter { color: #f6c90e; }
        .theme-pirate .btn { background-color: #5d2a2a; }
        .theme-pirate .btn:hover { background-color: #f6c90e; color: #000; }
    </style>
</head>
<body class="font-['Poppins'] theme-space text-white min-h-screen flex flex-col">
    <audio id="correctSound" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3"></audio>
    <audio id="wrongSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
    <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
    <audio id="loseSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-explosion-2758.mp3"></audio>
    <audio id="backgroundMusic" loop src="https://assets.mixkit.co/music/preview/mixkit-game-show-suspense-waiting-668.mp3"></audio>

    <header class="bg-black bg-opacity-50 py-4 px-6 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-red-500">Hangman Adventure</h1>
            <div>
                <button id="musicToggle" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md mr-2">Music: On</button>
                <button id="themeToggle" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md">Change Theme</button>
            </div>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- Main Menu -->
        <div id="mainMenu" class="text-center">
            <h2 class="text-4xl font-bold mb-8">Welcome to Hangman!</h2>
            <div class="max-w-md mx-auto bg-black bg-opacity-50 rounded-xl shadow-lg p-8">
                <button id="playSinglePlayer" class="btn w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg mb-4 text-xl">Single Player</button>
                <button id="playMultiPlayer" class="btn w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg mb-4 text-xl">Multiplayer</button>
                <button id="showInstructions" class="btn w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg mb-4 text-xl">How to Play</button>
                <button id="showLeaderboard" class="btn w-full bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 px-6 rounded-lg text-xl">Leaderboard</button>
            </div>
        </div>

        <!-- Difficulty Selection -->
        <div id="difficultyMenu" class="hidden text-center">
            <h2 class="text-3xl font-bold mb-8">Select Difficulty Level</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                <div class="panel bg-blue-900 bg-opacity-70 p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-4">Easy</h3>
                    <p class="mb-4">Short words (3-5 letters)<br>8 attempts</p>
                    <button class="difficulty-btn btn w-full bg-green-600 hover:bg-green-700 py-2 px-4 rounded" data-difficulty="easy">Play Easy</button>
                </div>
                <div class="panel bg-yellow-900 bg-opacity-70 p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-4">Medium</h3>
                    <p class="mb-4">Medium words (6-8 letters)<br>6 attempts</p>
                    <button class="difficulty-btn btn w-full bg-yellow-600 hover:bg-yellow-700 py-2 px-4 rounded" data-difficulty="medium">Play Medium</button>
                </div>
                <div class="panel bg-red-900 bg-opacity-70 p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-4">Hard</h3>
                    <p class="mb-4">Long/obscure words (9+ letters)<br>4 attempts</p>
                    <button class="difficulty-btn btn w-full bg-red-600 hover:bg-red-700 py-2 px-4 rounded" data-difficulty="hard">Play Hard</button>
                </div>
            </div>
            <div class="mt-8 max-w-md mx-auto panel bg-purple-900 bg-opacity-70 p-6 rounded-xl shadow-lg">
                <h3 class="text-2xl font-bold mb-4">Custom</h3>
                <div class="mb-4">
                    <label class="block mb-2">Word Length:</label>
                    <input type="number" id="customLength" min="3" max="15" value="6" class="w-full p-2 rounded text-black">
                </div>
                <div class="mb-4">
                    <label class="block mb-2">Attempts:</label>
                    <input type="number" id="customAttempts" min="3" max="10" value="6" class="w-full p-2 rounded text-black">
                </div>
                <div class="mb-4">
                    <label class="block mb-2">Category:</label>
                    <select id="customCategory" class="w-full p-2 rounded text-black">
                        <option value="general">General</option>
                        <option value="animals">Animals</option>
                        <option value="countries">Countries</option>
                        <option value="movies">Movies</option>
                        <option value="science">Science</option>
                    </select>
                </div>
                <button id="playCustom" class="btn w-full bg-purple-600 hover:bg-purple-700 py-2 px-4 rounded">Play Custom</button>
            </div>
            <button id="backToMainFromDifficulty" class="mt-6 btn bg-gray-600 hover:bg-gray-700 py-2 px-6 rounded">Back</button>
        </div>

        <!-- Multiplayer Setup -->
        <div id="multiplayerSetup" class="hidden text-center max-w-md mx-auto">
            <h2 class="text-3xl font-bold mb-8">Multiplayer Setup</h2>
            <div class="panel bg-purple-900 bg-opacity-70 p-6 rounded-xl shadow-lg">
                <div class="mb-4">
                    <label class="block mb-2">Enter a word for your opponent to guess:</label>
                    <input type="text" id="multiplayerWord" class="w-full p-2 rounded text-black" placeholder="Enter a word">
                </div>
                <div class="mb-4">
                    <label class="block mb-2">Hint (optional):</label>
                    <input type="text" id="multiplayerHint" class="w-full p-2 rounded text-black" placeholder="E.g. 'Animal'">
                </div>
                <div class="mb-4">
                    <label class="block mb-2">Attempts allowed:</label>
                    <input type="number" id="multiplayerAttempts" min="3" max="10" value="6" class="w-full p-2 rounded text-black">
                </div>
                <button id="startMultiplayerGame" class="btn w-full bg-green-600 hover:bg-green-700 py-2 px-4 rounded mb-4">Start Game</button>
                <button id="backToMainFromMultiplayer" class="btn w-full bg-gray-600 hover:bg-gray-700 py-2 px-4 rounded">Back</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="hidden">
            <div class="flex flex-col md:flex-row gap-8 justify-between">
                <!-- Hangman Drawing -->
                <div class="panel w-full md:w-2/5 p-6 rounded-xl shadow-lg flex flex-col items-center">
                    <div class="relative w-64 h-72 mb-4">
                        <!-- Gallows -->
                        <div class="absolute top-0 left-1/2 w-2 h-10 bg-gray-300 -translate-x-1/2 hidden" id="gallows-top"></div>
                        <div class="absolute top-10 left-1/2 w-32 h-2 bg-gray-300 -translate-x-1/2 hidden" id="gallows-beam"></div>
                        <div class="absolute top-10 left-1/2 w-2 h-64 bg-gray-300 -translate-x-1/2" id="gallows-pole"></div>
                        <div class="absolute top-64 left-1/2 w-48 h-2 bg-gray-300 -translate-x-1/2" id="gallows-base"></div>
                        
                        <!-- Hangman parts -->
                        <div class="absolute top-10 left-1/2 w-4 h-4 rounded-full bg-gray-800 -translate-x-1/2 hidden" id="head"></div>
                        <div class="absolute top-14 left-1/2 w-2 h-16 bg-gray-800 -translate-x-1/2 hidden" id="body"></div>
                        <div class="absolute top-16 left-1/2 w-2 h-10 bg-gray-800 -translate-x-1/2 rotate-45 origin-top hidden" id="right-arm"></div>
                        <div class="absolute top-16 left-1/2 w-2 h-10 bg-gray-800 -translate-x-1/2 -rotate-45 origin-top hidden" id="left-arm"></div>
                        <div class="absolute top-28 left-1/2 w-2 h-12 bg-gray-800 -translate-x-1/2 rotate-12 origin-top hidden" id="right-leg"></div>
                        <div class="absolute top-28 left-1/2 w-2 h-12 bg-gray-800 -translate-x-1/2 -rotate-12 origin-top hidden" id="left-leg"></div>
                        
                        <div class="absolute top-14 left-1/2 w-4 h-4 bg-red-500 -translate-x-1/2 rounded-full hidden" id="right-eye"></div>
                        <div class="absolute top-14 left-1/2 w-4 h-4 bg-red-500 -translate-x-1/2 rounded-full hidden" id="left-eye"></div>
                        <div class="absolute top-16 left-1/2 w-8 h-2 bg-red-500 -translate-x-1/2 rounded-full hidden" id="mouth"></div>
                    </div>
                    
                    <div class="text-center">
                        <div class="text-2xl font-bold mb-2" id="remainingLives">Remaining Lives: 6</div>
                        <div class="text-xl" id="categoryDisplay">Category: General</div>
                        <button id="getHint" class="btn mt-4 bg-blue-600 hover:bg-blue-700 py-2 px-4 rounded hidden">Get Hint</button>
                        <div id="hintDisplay" class="mt-2 text-yellow-300 hidden"></div>
                    </div>
                </div>
                
                <!-- Game Info -->
                <div class="panel w-full md:w-3/5 p-6 rounded-xl shadow-lg">
                    <div class="mb-6">
                        <div class="text-2xl font-bold mb-4">Guess the word:</div>
                        <div class="flex flex-wrap gap-3 justify-center mb-6" id="wordDisplay"></div>
                    </div>
                    
                    <div class="mb-6">
                        <div class="text-xl font-bold mb-2">Used Letters:</div>
                        <div class="flex flex-wrap gap-2 justify-center" id="usedLetters"></div>
                    </div>
                    
                    <div>
                        <div class="text-xl font-bold mb-4">Keyboard:</div>
                        <div class="grid grid-cols-9 gap-2">
                            <!-- First row: Q-W-E-R-T-Y-U-I-O-P -->
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="Q">Q</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="W">W</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="E">E</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="R">R</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="T">T</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="Y">Y</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="U">U</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="I">I</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="O">O</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="P">P</button>
                        </div>
                        <div class="grid grid-cols-9 gap-2 mt-2">
                            <!-- Second row: A-S-D-F-G-H-J-K-L -->
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="A">A</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="S">S</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="D">D</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="F">F</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="G">G</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="H">H</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="J">J</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="K">K</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="L">L</button>
                        </div>
                        <div class="grid grid-cols-9 gap-2 mt-2">
                            <!-- Third row: Z-X-C-V-B-N-M -->
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="Z">Z</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="X">X</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="C">C</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="V">V</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="B">B</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="N">N</button>
                            <button class="keyboard-key btn bg-gray-700 hover:bg-blue-600 py-2 px-2 rounded" data-letter="M">M</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-6 text-center">
                <button id="giveUpBtn" class="btn bg-red-600 hover:bg-red-700 py-2 px-6 rounded mr-4">Give Up</button>
                <button id="newGameBtn" class="btn bg-gray-600 hover:bg-gray-700 py-2 px-6 rounded">New Game</button>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="hidden text-center max-w-md mx-auto">
            <div class="panel bg-black bg-opacity-70 p-8 rounded-xl shadow-lg">
                <h2 class="text-4xl font-bold mb-6" id="gameResult">You Won!</h2>
                <div class="text-2xl mb-4" id="finalWord">The word was: <span class="font-bold">HANGMAN</span></div>
                <div class="text-xl mb-8" id="scoreDisplay">Score: 250</div>
                <button id="playAgainBtn" class="btn bg-green-600 hover:bg-green-700 py-3 px-8 rounded-lg text-xl mb-4 w-full">Play Again</button>
                <button id="backToMenuBtn" class="btn bg-blue-600 hover:bg-blue-700 py-3 px-8 rounded-lg text-xl w-full">Return to Menu</button>
            </div>
        </div>

        <!-- Instructions -->
        <div id="instructionsScreen" class="hidden max-w-4xl mx-auto">
            <div class="panel bg-black bg-opacity-70 p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-center">How to Play Hangman</h2>
                <div class="space-y-4 text-lg">
                    <p>Hangman is a word-guessing game where you try to uncover a hidden word by guessing letters one at a time.</p>
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <h3 class="text-xl font-bold mb-2">Basic Rules:</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Guess letters to reveal the hidden word</li>
                            <li>Each incorrect guess brings you closer to losing</li>
                            <li>Win by guessing all letters in the word before running out of attempts</li>
                        </ul>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <h3 class="text-xl font-bold mb-2">Difficulty Levels:</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><span class="font-bold">Easy:</span> Short common words (3-5 letters), 8 attempts</li>
                            <li><span class="font-bold">Medium:</span> Medium words (6-8 letters), 6 attempts</li>
                            <li><span class="font-bold">Hard:</span> Long/obscure words (9+ letters), 4 attempts</li>
                            <li><span class="font-bold">Custom:</span> Choose your own settings</li>
                        </ul>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <h3 class="text-xl font-bold mb-2">Multiplayer Mode:</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>One player enters a word and optional hint</li>
                            <li>The other player tries to guess the word</li>
                        </ul>
                    </div>
                    <div class="text-center mt-6">
                        <button id="backFromInstructions" class="btn bg-blue-600 hover:bg-blue-700 py-2 px-8 rounded">Got It!</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leaderboard -->
        <div id="leaderboardScreen" class="hidden max-w-4xl mx-auto">
            <div class="panel bg-black bg-opacity-70 p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-center">Leaderboard</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-center bg-blue-900 p-2 rounded">Easy</h3>
                        <div class="bg-gray-800 p-4 rounded-lg" id="easyScores">
                            <div class="flex justify-between p-1 border-b border-gray-700">
                                <span>1. Player 1</span>
                                <span>500</span>
                            </div>
                            <div class="flex justify-between p-1 border-b border-gray-700">
                                <span>2. Player 2</span>
                                <span>450</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-center bg-yellow-600 p-2 rounded">Medium</h3>
                        <div class="bg-gray-800 p-4 rounded-lg" id="mediumScores">
                            <div class="flex justify-between p-1 border-b border-gray-700">
                                <span>1. Player 3</span>
                                <span>700</span>
                            </div>
                            <div class="flex justify-between p-1 border-b border-gray-700">
                                <span>2. Player 1</span>
                                <span>650</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-center bg-red-600 p-2 rounded">Hard</h3>
                        <div class="bg-gray-800 p-4 rounded-lg" id="hardScores">
                            <div class="flex justify-between p-1 border-b border-gray-700">
                                <span>1. Player 4</span>
                                <span>900</span>
                            </div>
                            <div class="flex justify-between p-1 border-b border-gray-700">
                                <span>2. Player 5</span>
                                <span>850</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-6">
                    <button id="backFromLeaderboard" class="btn bg-blue-600 hover:bg-blue-700 py-2 px-8 rounded">Back to Menu</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-black bg-opacity-50 py-4 text-center">
        <p>© 2023 Hangman Adventure | Created with HTML, CSS & JavaScript</p>
    </footer>

    <script>
        // Game state
        const gameState = {
            word: '',
            guessedLetters: [],
            wrongGuesses: 0,
            maxWrongGuesses: 6,
            difficulty: 'medium',
            category: 'general',
            score: 0,
            hintUsed: false,
            gameType: 'single', // 'single' or 'multi'
            themes: ['space', 'forest', 'pirate'],
            currentTheme: 0,
            wordLists: {
                easy: {
                    general: ["CAT", "DOG", "BOOK", "MOON", "SUN", "HAT", "CAR", "BALL", "TREE", "MOUSE"],
                    animals: ["LION", "FROG", "BEAR", "DUCK", "OWL", "FISH", "BIRD", "WOLF", "DEER", "PIG"],
                    countries: ["USA", "CAN", "MEX", "JPN", "UK", "FRA", "GER", "ITA", "BRA", "AUS"],
                    movies: ["TOY", "JFK", "ET", "UP", "JAZZ", "HULK", "JAWS", "TITAN", "ROCKY", "MAD"],
                    science: ["ATOM", "GENE", "CELL", "MATH", "DATA", "BEAKER", "WATER", "MOON", "STAR", "LIGHT"]
                },
                medium: {
                    general: ["GARDEN", "PILLOW", "BOTTLE", "WINDOW", "PENCIL", "MIRROR", "TRAVEL", "GUITAR", "BALLOON", "LADDER"],
                    animals: ["GIRAFFE", "DOLPHIN", "ELEPHANT", "CHEETAH", "PENGUIN", "OSTRICH", "RACCOON", "GORILLA", "HAMSTER", "PEACOCK"],
                    countries: ["ENGLAND", "SPAIN", "VIETNAM", "THAILAND", "SWEDEN", "NIGERIA", "POLAND", "IRELAND", "FINLAND", "ROMANIA"],
                    movies: ["AVATAR", "TITANIC", "INCEPTION", "JURASSIC", "PRESTIGE", "MATRIX", "GLADIATOR", "CASINO", "SHREK", "FROZEN"],
                    science: ["GRAVITY", "VOLTAGE", "MOLECULE", "QUARK", "PLANET", "TELESCOPE", "DYNAMO", "FOSSIL", "PENDULUM", "RADAR"]
                },
                hard: {
                    general: ["KALEIDOSCOPE", "ACCOMMODATE", "KNOWLEDGEABLE", "LOCOMOTIVE", "QUINTESSENCE", "RIDICULOUS", "VACUUM", "WEDNESDAY", "XENOPHOBIA", "YACHT"],
                    animals: ["CHAMELEON", "PLATYPUS", "ARMADILLO", "RINOCEROS", "HIPPOPOTAMUS", "ANACONDA", "KOMODO", "CASSOWARY", "NARWHAL", "AXOLOTL"],
                    countries: ["KAZAKHSTAN", "KYRGYZSTAN", "MONGOLIA", "TAJIKISTAN", "TURKMENISTAN", "UZBEKISTAN", "MADAGASCAR", "PHILIPPINES", "SWITZERLAND", "VENEZUELA"],
                    movies: ["PSYCHOANALYSIS", "PSYCHOPHYSICS", "QUANTUMSUPERPOSITION", "SCHRODINGEREQUATION", "THERMODYNAMICS", "SPECTROSCOPY", "BIOINFORMATICS", "CRYSTALLOGRAPHY", "ASTROPHYSICS", "NEUROSCIENCE"],
                    science: ["ELECTROMAGNETISM", "THERMODYNAMICS", "PHOTOSYNTHESIS", "ASTROPHYSICS", "QUASIPARTICLE", "BIOINFORMATICS", "CRYSTALLOGRAPHY", "NEUROSCIENCE", "SUPERCONDUCTIVITY", "ASTROBIOLOGY"]
                }
            }
        };

        // DOM elements
        const elements = {
            mainMenu: document.getElementById('mainMenu'),
            difficultyMenu: document.getElementById('difficultyMenu'),
            multiplayerSetup: document.getElementById('multiplayerSetup'),
            gameScreen: document.getElementById('gameScreen'),
            gameOverScreen: document.getElementById('gameOverScreen'),
            instructionsScreen: document.getElementById('instructionsScreen'),
            leaderboardScreen: document.getElementById('leaderboardScreen'),
            
            // Main menu buttons
            playSinglePlayer: document.getElementById('playSinglePlayer'),
            playMultiPlayer: document.getElementById('playMultiPlayer'),
            showInstructions: document.getElementById('showInstructions'),
            showLeaderboard: document.getElementById('showLeaderboard'),
            
            // Difficulty menu buttons
            difficultyBtns: document.querySelectorAll('.difficulty-btn'),
            customLength: document.getElementById('customLength'),
            customAttempts: document.getElementById('customAttempts'),
            customCategory: document.getElementById('customCategory'),
            playCustom: document.getElementById('playCustom'),
            backToMainFromDifficulty: document.getElementById('backToMainFromDifficulty'),
            
            // Multiplayer setup
            multiplayerWord: document.getElementById('multiplayerWord'),
            multiplayerHint: document.getElementById('multiplayerHint'),
            multiplayerAttempts: document.getElementById('multiplayerAttempts'),
            startMultiplayerGame: document.getElementById('startMultiplayerGame'),
            backToMainFromMultiplayer: document.getElementById('backToMainFromMultiplayer'),
            
            // Game screen elements
            remainingLives: document.getElementById('remainingLives'),
            categoryDisplay: document.getElementById('categoryDisplay'),
            wordDisplay: document.getElementById('wordDisplay'),
            usedLetters: document.getElementById('usedLetters'),
            keyboardKeys: document.querySelectorAll('.keyboard-key'),
            getHint: document.getElementById('getHint'),
            hintDisplay: document.getElementById('hintDisplay'),
            giveUpBtn: document.getElementById('giveUpBtn'),
            newGameBtn: document.getElementById('newGameBtn'),
            
            // Hangman parts
            gallowsTop: document.getElementById('gallows-top'),
            gallowsBeam: document.getElementById('gallows-beam'),
            gallowsPole: document.getElementById('gallows-pole'),
            gallowsBase: document.getElementById('gallows-base'),
            head: document.getElementById('head'),
            body: document.getElementById('body'),
            rightArm: document.getElementById('right-arm'),
            leftArm: document.getElementById('left-arm'),
            rightLeg: document.getElementById('right-leg'),
            leftLeg: document.getElementById('left-leg'),
            rightEye: document.getElementById('right-eye'),
            leftEye: document.getElementById('left-eye'),
            mouth: document.getElementById('mouth'),
            
            // Game over screen
            gameResult: document.getElementById('gameResult'),
            finalWord: document.getElementById('finalWord'),
            scoreDisplay: document.getElementById('scoreDisplay'),
            playAgainBtn: document.getElementById('playAgainBtn'),
            backToMenuBtn: document.getElementById('backToMenuBtn'),
            
            // Instructions screen
            backFromInstructions: document.getElementById('backFromInstructions'),
            
            // Leaderboard screen
            easyScores: document.getElementById('easyScores'),
            mediumScores: document.getElementById('mediumScores'),
            hardScores: document.getElementById('hardScores'),
            backFromLeaderboard: document.getElementById('backFromLeaderboard'),
            
            // Audio elements
            correctSound: document.getElementById('correctSound'),
            wrongSound: document.getElementById('wrongSound'),
            winSound: document.getElementById('winSound'),
            loseSound: document.getElementById('loseSound'),
            backgroundMusic: document.getElementById('backgroundMusic'),
            musicToggle: document.getElementById('musicToggle'),
            themeToggle: document.getElementById('themeToggle')
        };

        // Event listeners
        elements.playSinglePlayer.addEventListener('click', showDifficultyMenu);
        elements.playMultiPlayer.addEventListener('click', showMultiplayerSetup);
        elements.showInstructions.addEventListener('click', showInstructions);
        elements.showLeaderboard.addEventListener('click', showLeaderboard);
        
        elements.difficultyBtns.forEach(btn => {
            btn.addEventListener('click', () => startGame(btn.dataset.difficulty));
        });
        
        elements.playCustom.addEventListener('click', startCustomGame);
        elements.backToMainFromDifficulty.addEventListener('click', showMainMenu);
        
        elements.startMultiplayerGame.addEventListener('click', startMultiplayerGame);
        elements.backToMainFromMultiplayer.addEventListener('click', showMainMenu);
        
        elements.keyboardKeys.forEach(key => {
            key.addEventListener('click', () => handleGuess(key.dataset.letter));
        });
        
        elements.getHint.addEventListener('click', giveHint);
        elements.giveUpBtn.addEventListener('click', endGameLost);
        elements.newGameBtn.addEventListener('click', () => {
            if (gameState.gameType === 'multi') {
                showMultiplayerSetup();
            } else {
                showDifficultyMenu();
            }
        });
        
        elements.playAgainBtn.addEventListener('click', () => {
            if (gameState.gameType === 'multi') {
                showMultiplayerSetup();
            } else {
                startGame(gameState.difficulty);
            }
        });
        elements.backToMenuBtn.addEventListener('click', showMainMenu);
        
        elements.backFromInstructions.addEventListener('click', showMainMenu);
        elements.backFromLeaderboard.addEventListener('click', showMainMenu);
        
        elements.musicToggle.addEventListener('click', toggleMusic);
        elements.themeToggle.addEventListener('click', changeTheme);
        
        // Keyboard support
        document.addEventListener('keydown', handleKeyPress);
        
        // Audio elements
        elements.backgroundMusic.volume = 0.3;
        elements.correctSound.volume = 0.5;
        elements.wrongSound.volume = 0.5;
        
        // Screen navigation functions
        function showMainMenu() {
            hideAllScreens();
            elements.mainMenu.classList.remove('hidden');
            elements.backgroundMusic.pause();
        }
        
        function showDifficultyMenu() {
            hideAllScreens();
            elements.difficultyMenu.classList.remove('hidden');
        }
        
        function showMultiplayerSetup() {
            hideAllScreens();
            elements.multiplayerSetup.classList.remove('hidden');
            elements.multiplayerWord.value = '';
            elements.multiplayerHint.value = '';
            elements.multiplayerAttempts.value = '6';
        }
        
        function showGameScreen() {
            hideAllScreens();
            elements.gameScreen.classList.remove('hidden');
            elements.backgroundMusic.play();
        }
        
        function showGameOverScreen(result, word, score) {
            hideAllScreens();
            elements.gameOverScreen.classList.remove('hidden');
            elements.gameResult.textContent = result;
            elements.finalWord.innerHTML = `The word was: <span class="font-bold">${word}</span>`;
            elements.scoreDisplay.textContent = `Score: ${score}`;
        }
        
        function showInstructions() {
            hideAllScreens();
            elements.instructionsScreen.classList.remove('hidden');
        }
        
        function showLeaderboard() {
            hideAllScreens();
            elements.leaderboardScreen.classList.remove('hidden');
            updateLeaderboard();
        }
        
        function hideAllScreens() {
            elements.mainMenu.classList.add('hidden');
            elements.difficultyMenu.classList.add('hidden');
            elements.multiplayerSetup.classList.add('hidden');
            elements.gameScreen.classList.add('hidden');
            elements.gameOverScreen.classList.add('hidden');
            elements.instructionsScreen.classList.add('hidden');
            elements.leaderboardScreen.classList.add('hidden');
        }
        
        // Game functions
        function startGame(difficulty) {
            gameState.difficulty = difficulty;
            gameState.gameType = 'single';
            
            // Set game parameters based on difficulty
            switch(difficulty) {
                case 'easy':
                    gameState.maxWrongGuesses = 8;
                    break;
                case 'medium':
                    gameState.maxWrongGuesses = 6;
                    break;
                case 'hard':
                    gameState.maxWrongGuesses = 4;
                    break;
            }
            
            // Reset game state
            resetGame();
            
            // Select a random word from the appropriate list
            gameState.category = getRandomCategory();
            const wordList = gameState.wordLists[difficulty][gameState.category];
            gameState.word = wordList[Math.floor(Math.random() * wordList.length)];
            
            // Start the game
            initializeGame();
        }
        
        function startCustomGame() {
            gameState.difficulty = 'custom';
            gameState.gameType = 'single';
            
            // Get custom settings
            const length = parseInt(elements.customLength.value);
            gameState.maxWrongGuesses = parseInt(elements.customAttempts.value);
            gameState.category = elements.customCategory.value;
            
            // Reset game state
            resetGame();
            
            // Filter words by length
            let filteredList;
            if (length <= 5) {
                filteredList = gameState.wordLists.easy[gameState.category];
            } else if (length <= 8) {
                filteredList = gameState.wordLists.medium[gameState.category];
            } else {
                filteredList = gameState.wordLists.hard[gameState.category];
            }
            
            // Filter to words of exact length if possible, otherwise closest
            let exactLengthWords = filteredList.filter(word => word.length === length);
            if (exactLengthWords.length === 0) {
                exactLengthWords = filteredList;
            }
            
            // Select a random word
            gameState.word = exactLengthWords[Math.floor(Math.random() * exactLengthWords.length)];
            
            // Start the game
            initializeGame();
        }
        
        function startMultiplayerGame() {
            const word = elements.multiplayerWord.value.trim().toUpperCase();
            if (!word) {
                alert('Please enter a word!');
                return;
            }
            
            if (!/^[A-Z]+$/.test(word)) {
                alert('Please enter only letters (no spaces or special characters)');
                return;
            }
            
            gameState.gameType = 'multi';
            gameState.difficulty = 'custom';
            gameState.maxWrongGuesses = parseInt(elements.multiplayerAttempts.value) || 6;
            gameState.hint = elements.multiplayerHint.value.trim() || 'No hint provided';
            
            // Reset game state
            resetGame();
            gameState.word = word;
            
            // Start the game
            initializeGame();
        }
        
        function initializeGame() {
            showGameScreen();
            
            // Display initial state
            elements.remainingLives.textContent = `Remaining Lives: ${gameState.maxWrongGuesses - gameState.wrongGuesses}`;
            elements.categoryDisplay.textContent = `Category: ${gameState.category.charAt(0).toUpperCase() + gameState.category.slice(1)}`;
            
            // Display word blanks
            displayWord();
            
            // Reset the hangman display
            resetHangmanDisplay();
            
            // Show/hide hint button (only for single player)
            if (gameState.gameType === 'single') {
                elements.getHint.classList.remove('hidden');
            } else {
                elements.getHint.classList.add('hidden');
            }
            elements.hintDisplay.classList.add('hidden');
        }
        
        function resetGame() {
            gameState.guessedLetters = [];
            gameState.wrongGuesses = 0;
            gameState.score = 0;
            gameState.hintUsed = false;
            
            // Clear used letters display
            elements.usedLetters.innerHTML = '';
            
            // Reset keyboard keys
            elements.keyboardKeys.forEach(key => {
                key.classList.remove('bg-green-600', 'bg-red-600', 'opacity-50');
                key.disabled = false;
            });
        }
        
        function resetHangmanDisplay() {
            // Hide all hangman parts
            elements.gallowsTop.classList.add('hidden');
            elements.gallowsBeam.classList.add('hidden');
            elements.head.classList.add('hidden');
            elements.body.classList.add('hidden');
            elements.rightArm.classList.add('hidden');
            elements.leftArm.classList.add('hidden');
            elements.rightLeg.classList.add('hidden');
            elements.leftLeg.classList.add('hidden');
            elements.rightEye.classList.add('hidden');
            elements.leftEye.classList.add('hidden');
            elements.mouth.classList.add('hidden');
        }
        
        function displayWord() {
            elements.wordDisplay.innerHTML = '';
            let allLettersGuessed = true;
            
            for (let i = 0; i < gameState.word.length; i++) {
                const letter = gameState.word[i];
                const letterSpan = document.createElement('span');
                letterSpan.className = 'letter text-4xl font-bold w-10 h-12 flex items-center justify-center border-b-4 border-white';
                
                if (gameState.guessedLetters.includes(letter) || letter === ' ') {
                    letterSpan.textContent = letter;
                } else {
                    letterSpan.textContent = '_';
                    allLettersGuessed = false;
                }
                
                elements.wordDisplay.appendChild(letterSpan);
            }
            
            // Check for win condition
            if (allLettersGuessed) {
                endGameWon();
            }
        }
        
        function handleGuess(letter) {
            // Check if letter was already guessed
            if (gameState.guessedLetters.includes(letter)) {
                return;
            }
            
            // Add to guessed letters
            gameState.guessedLetters.push(letter);
            
            // Update used letters display
            const usedLetterSpan = document.createElement('span');
            usedLetterSpan.textContent = letter;
            usedLetterSpan.className = 'text-xl px-2';
            elements.usedLetters.appendChild(usedLetterSpan);
            
            // Disable the clicked key
            elements.keyboardKeys.forEach(key => {
                if (key.dataset.letter === letter) {
                    key.disabled = true;
                }
            });
            
            // Play sound effect
            const audio = gameState.word.includes(letter) ? elements.correctSound : elements.wrongSound;
            audio.currentTime = 0;
            audio.play();
            
            // Check if guess is correct
            if (gameState.word.includes(letter)) {
                // Correct guess
                const key = Array.from(elements.keyboardKeys).find(k => k.dataset.letter === letter);
                if (key) {
                    key.classList.add('bg-green-600');
                    key.classList.remove('bg-gray-700', 'hover:bg-blue-600');
                }
                
                // Jump animation for correct letters
                const letterElements = elements.wordDisplay.querySelectorAll('span');
                for (let i = 0; i < gameState.word.length; i++) {
                    if (gameState.word[i] === letter) {
                        letterElements[i].classList.add('jump');
                        setTimeout(() => {
                            letterElements[i].classList.remove('jump');
                        }, 500);
                    }
                }
                
                displayWord();
            } else {
                // Wrong guess
                const key = Array.from(elements.keyboardKeys).find(k => k.dataset.letter === letter);
                if (key) {
                    key.classList.add('bg-red-600');
                    key.classList.remove('bg-gray-700', 'hover:bg-blue-600');
                }
                
                // Shake animation for wrong guess
                elements.wordDisplay.classList.add('shake');
                setTimeout(() => {
                    elements.wordDisplay.classList.remove('shake');
                }, 500);
                
                gameState.wrongGuesses++;
                updateHangman();
                
                // Check for loss condition
                if (gameState.wrongGuesses >= gameState.maxWrongGuesses) {
                    setTimeout(endGameLost, 1000);
                }
            }
            
            // Update remaining lives display
            elements.remainingLives.textContent = `Remaining Lives: ${gameState.maxWrongGuesses - gameState.wrongGuesses}`;
            
            // For multiplayer, show hint after 3 wrong guesses
            if (gameState.gameType === 'multi' && gameState.wrongGuesses >= 3 && !elements.hintDisplay.classList.contains('hidden')) {
                elements.hintDisplay.classList.remove('hidden');
                elements.hintDisplay.textContent = `Hint: ${gameState.hint}`;
            }
        }
        
        function updateHangman() {
            // Show appropriate body parts based on wrong guesses
            switch(gameState.wrongGuesses) {
                case 1:
                    elements.gallowsTop.classList.remove('hidden');
                    elements.gallowsBeam.classList.remove('hidden');
                    break;
                case 2:
                    elements.head.classList.remove('hidden');
                    break;
                case 3:
                    elements.body.classList.remove('hidden');
                    break;
                case 4:
                    elements.rightArm.classList.remove('hidden');
                    break;
                case 5:
                    elements.leftArm.classList.remove('hidden');
                    break;
                case 6:
                    elements.rightLeg.classList.remove('hidden');
                    break;
                case 7:
                    elements.leftLeg.classList.remove('hidden');
                    break;
                case 8:
                    elements.rightEye.classList.remove('hidden');
                    elements.leftEye.classList.remove('hidden');
                    elements.mouth.classList.remove('hidden');
                    break;
            }
        }
        
        function endGameWon() {
            // Calculate score (base points + bonus for unused attempts)
            const basePoints = gameState.word.length * 50;
            const bonusPoints = (gameState.maxWrongGuesses - gameState.wrongGuesses) * 25;
            gameState.score = basePoints + bonusPoints;
            
            // Add score to leaderboard
            addToLeaderboard(gameState.difficulty, 'Player', gameState.score);
            
            // Play win sound
            elements.winSound.currentTime = 0;
            elements.winSound.play();
            
            // Show game over screen
            showGameOverScreen('You Won!', gameState.word, gameState.score);
            
            // Blink all letters
            const letters = elements.wordDisplay.querySelectorAll('span');
            let count = 0;
            const blinkInterval = setInterval(() => {
                letters.forEach(letter => {
                    letter.classList.toggle('text-green-400');
                });
                count++;
                if (count >= 6) {
                    clearInterval(blinkInterval);
                    letters.forEach(letter => {
                        letter.classList.remove('text-green-400');
                    });
                }
            }, 300);
        }
        
        function endGameLost() {
            // Play lose sound
            elements.loseSound.currentTime = 0;
            elements.loseSound.play();
            
            // Show game over screen
            showGameOverScreen('Game Over!', gameState.word, 0);
            
            // Reveal all letters in red
            const letters = elements.wordDisplay.querySelectorAll('span');
            letters.forEach((letter, index) => {
                if (letter.textContent === '_') {
                    letter.textContent = gameState.word[index];
                    letter.classList.add('text-red-500');
                }
            });
        }
        
        function giveHint() {
            if (gameState.hintUsed) return;
            
            gameState.hintUsed = true;
            elements.getHint.disabled = true;
            
            // For single player, get a hint from a predefined list
            let hintText;
            if (gameState.gameType === 'single') {
                switch(gameState.category) {
                    case 'animals':
                        hintText = "This is an animal.";
                        break;
                    case 'countries':
                        hintText = "This is a country.";
                        break;
                    case 'movies':
                        hintText = "This is a movie title.";
                        break;
                    case 'science':
                        hintText = "This is related to science.";
                        break;
                    default:
                        hintText = `It's a ${gameState.word.length}-letter word.`;
                }
            } else {
                hintText = gameState.hint;
            }
            
            elements.hintDisplay.textContent = `Hint: ${hintText}`;
            elements.hintDisplay.classList.remove('hidden');
            
            // Reduce score for using hint
            gameState.score -= 50;
            if (gameState.score < 0) gameState.score = 0;
        }
        
        function handleKeyPress(e) {
            // Only handle keypress if game screen is visible
            if (!elements.gameScreen.classList.contains('hidden')) {
                const key = e.key.toUpperCase();
                if (/^[A-Z]$/.test(key) && !gameState.guessedLetters.includes(key)) {
                    handleGuess(key);
                }
            }
        }
        
        function getRandomCategory() {
            const categories = Object.keys(gameState.wordLists.easy);
            return categories[Math.floor(Math.random() * categories.length)];
        }
        
        // Leaderboard functions
        function updateLeaderboard() {
            // This is a simplified version - in a real app, you'd save this to localStorage
            const easyScores = JSON.parse(localStorage.getItem('leaderboard_easy')) || [];
            const mediumScores = JSON.parse(localStorage.getItem('leaderboard_medium')) || [];
            const hardScores = JSON.parse(localStorage.getItem('leaderboard_hard')) || [];
            
            updateLeaderboardDisplay(elements.easyScores, easyScores);
            updateLeaderboardDisplay(elements.mediumScores, mediumScores);
            updateLeaderboardDisplay(elements.hardScores, hardScores);
        }
        
        function updateLeaderboardDisplay(container, scores) {
            container.innerHTML = '';
            scores.sort((a, b) => b.score - a.score).slice(0, 5).forEach((entry, index) => {
                const div = document.createElement('div');
                div.className = 'flex justify-between p-1 border-b border-gray-700';
                div.innerHTML = `<span>${index + 1}. ${entry.name}</span><span>${entry.score}</span>`;
                container.appendChild(div);
            });
        }
        
        function addToLeaderboard(difficulty, name, score) {
            const key = `leaderboard_${difficulty}`;
            const scores = JSON.parse(localStorage.getItem(key)) || [];
            scores.push({ name, score });
            localStorage.setItem(key, JSON.stringify(scores));
        }
        
        // Settings functions
        function toggleMusic() {
            if (elements.backgroundMusic.paused) {
                elements.backgroundMusic.play();
                elements.musicToggle.textContent = 'Music: On';
            } else {
                elements.backgroundMusic.pause();
                elements.musicToggle.textContent = 'Music: Off';
            }
        }
        
        function changeTheme() {
            gameState.currentTheme = (gameState.currentTheme + 1) % gameState.themes.length;
            const newTheme = gameState.themes[gameState.currentTheme];
            
            document.body.className = document.body.className.replace(/theme-\w+/g, '');
            document.body.classList.add(`theme-${newTheme}`);
            
            elements.themeToggle.textContent = `Theme: ${newTheme.charAt(0).toUpperCase() + newTheme.slice(1)}`;
        }
        
        // Initialize
        showMainMenu();
    </script>
</body>
</html>
